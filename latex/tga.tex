\begin{comment}
  \bibliography{project.bib}
\end{comment}

\chapter{TGA -- Truevision Graphics Adapter}
\label{cha:tga}

\begin{refsection}

  \section{Introduction}
  \label{sec:tga-introduction}


  The whole purpose of this book was to give a good understanding of
  how image formats really work under the hood. But we couldn't just
  have jumped right in, we required knowledge of how color is stored
  digitally and how compression algorithms work. Now it's time to put
  that knowledge to good use. \textit{All} the compression algorithms
  we just covered are used in the image formats we are going to
  explore. And furthermore, the digital color storage model we have
  learned about is used extensively in image formats.

  Now it's time to explore our real first image format: TGA
  \index{TGA}. But why TGA of all image formats? Because the format is
  an extremely simple one at that, yet it is actually videly used in
  some areas, including games and video processing. It has all the
  parts common to all image formats and it even features a very simple
  compression algoriothm: RLE, which was one of the algoriothms we
  covered in the last chapter.

  But the TGA format is also pretty huge and supports several
  features. However, just a very few of these features are used in
  images you met out in the field, so we will just focused on these
  selected features. And remember, I'm only here to try and get you an
  \textit{overview} of the structure of a TGA file, not to tell how
  exactly everything in the format works. If you want to know more
  about the other features of the format, or more in depth of the
  features I will cover, I highly reccomend you to read the TGA
  specification: \cite{91:_truev_tga_file_format_specif}. As far as
  file format standards go, it's a very well written and clear
  specification and that is part of the reason why I chose to first
  cover the TGA format.

  \newcommand{\plural}[3]{\ifstrequal{#1}{1}{#2}{#3}}

  \newcommand{\fieldlength}[1]{\ifstrequal{#1}{0}{variable}{#1 \plural{#1}{byte}{bytes}}}

  \newcommand{\imgfield}[2]{\subsection*{#1(\fieldlength{#2})}}

  \section{File Header}

  \imgfield{ID Length}{1}

  Surprisingly enough, this is one the few image format that doesn't
  have a set of magic numbers at the beginning. Instead, something
  known as the of the image is used. In a later field of
  the format, there is a field called the image ID. It is disscussed
  in the future section.

  \imgfield{Color Map Type}{1}

  The TGA format supports palettetes. An alternative term for palette
  is Color map\index{color map} and that word is used in the TGA
  standard. This field could simply be seen a boolean value indicating
  whether or not the image has a color map or not. So if it is $1$,
  there is indeed a color map in the image, otherwhise; there's no
  color map.

  \imgfield{Image Type}{1}

  There are several ways of storing color as we talked about in
  chapter \ref{cha:color}. In the TGA format there's
  pseudo-color\index{pseudo-color}, which means that the color data
  uses a palette and there's true-color\index{true-color}, meaning that the raw
  color data is stored in the image. And furthermore, the color data
  may either be stored in RGB values, grayscale values and the data
  may even be compressed.

  In the end, this all amounts to $6$ different kinds of images. The
  image type is specified by the number value of this field. Table \ref{tab:imgtype}
  shows all of these different kinds of images. If you have been
  reading carefully up to this point, all the terms of the table
  should make perfect sense to you.

  \begin{table}[h!]
    \centering
    \begin{tabular}[h!]{ll}
      \toprule
      Image Type & Properties \\
      \midrule
      1 & Uncompressed, Color-mapped \\
      2 & Uncompressed, True-color \\
      3 & Uncompressed, Grayscale\\
      9 & Run-length encoded, Color-mapped \\
      10 & Run-length encoded, True-color \\
      11 & Run-length encoded, Grayscale\\
      \bottomrule
    \end{tabular}
    \caption{Image Type}
    \label{tab:imgtype}
  \end{table}

  \imgfield{Color map specification}{5}

  \section{Color Data}

  \section{Extension Area}

  The extension area includes other miscellaneous information about an
  image. However, I consider it uncessasy for you to know this
  information. you should read the TGA standard for information on
  this area and also read the sample source code in:

  \printbibliography[heading=subbibliography]

\end{refsection}